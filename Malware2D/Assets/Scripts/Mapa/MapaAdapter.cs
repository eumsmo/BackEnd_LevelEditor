using UnityEngine;

public class MapaAdapter {
    public static MapaData GetMapaData(Mapa mapa) {
        MapaData mapaData = new MapaData {
            largura = mapa.largura,
            altura = mapa.altura,
            chaos = mapa.chaos
        };

        mapaData.objetos = new ObjetoData[mapa.objetos.Length];

        for (int i = 0; i < mapa.objetos.Length; i++) {
            Objeto objeto = mapa.objetos[i];
            ObjetoData objetoData = new ObjetoData {
                tipo = objeto.tipo.ToString(),
                posicao = objeto.posicao,
                direcao = objeto.direcao.ToString()
            };
            mapaData.objetos[i] = objetoData;
        }

        return mapaData;
    }

    public static Mapa GetMapa(MapaData mapaData) {
        Mapa mapa = new Mapa {
            largura = mapaData.largura,
            altura = mapaData.altura,
            chaos = mapaData.chaos
        };

        mapa.objetos = new Objeto[mapaData.objetos.Length];

        for (int i = 0; i < mapaData.objetos.Length; i++) {
            Objeto objeto = new Objeto {
                tipo = (TipoObjeto)System.Enum.Parse(typeof(TipoObjeto), mapaData.objetos[i].tipo),
                posicao = mapaData.objetos[i].posicao,
                direcao = (Direcao)System.Enum.Parse(typeof(Direcao), mapaData.objetos[i].direcao)
            };
            mapa.objetos[i] = objeto;
        }

        return mapa;
    }
}
